<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="/style.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Search Recipes</title>
  </head>

  <body>
    <header>
      <nav class="navbar">
        <div class="logo">Flavor Table</div>
        <ul class="nav-links">
          <li>
            <a href="/"><button class="nav-btn">Home</button></a>
          </li>
          <li>
            <a href="/recipes/search" class="active"
              ><button id="searchBtn">Search </button></a
            >
          </li>
          <li>
            <a href="/recipes/random"
              ><button class="nav-btn">Random </button></a
            >
          </li>
          <li>
            <a href="/recipes/favorites"><button>Favorites </button></a>
          </li>
          <li>
            <a href="/user/registerPage"><button class="regNavBtn">Register</button></a>
          </li>
        </ul>

      </nav>
    </header>

    <main>
      <div class="search-container">
        <h1>Type an Ingredient – Get a DISH!</h1>
        <input
          type="text"
          id="searchInput"
          placeholder="Enter ingredients, e.g. chicken, rice"
        />
        <button id="searchPageBtn">Search</button>

        <div id="searchResults" class="recipe-list"></div>
      </div>
    </main>
    <div id="loadingSpinner" class="loading hidden"></div>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="/app.js"></script>

    <!-- <script>
    //   const searchBtn = document.getElementById("searchPageBtn");
    //   const searchInput = document.getElementById("searchInput");
    //   const searchResults = document.getElementById("searchResults");
    //   searchBtn.addEventListener("click", async () => {
    //     const ingredients = searchInput.value.trim();
    //     if (!ingredients) {
    //       alert("Please enter ingredients!");
    //       return;
    //     }

    //     try {
    //       const res = await fetch(
    //         `/recipes/api/by-ingredients?ingredients=${encodeURIComponent(
    //           ingredients
    //         )}`
    //       );
    //       const data = await res.json();

    //       searchResults.innerHTML = "";

    //       if (data.length === 0) {
    //         searchResults.innerHTML = "<p>No recipes found.</p>";
    //       } else {
    //         data.forEach((recipe) => {
    //           console.log(recipe);
    //           const card = document.createElement("div");
    //           card.className = "recipe-card-small";

    //           // Handle used and missed ingredients safely
    //           const used = recipe.usedIngredients
    //             ? recipe.usedIngredients.map((i) => i.name).join(", ")
    //             : "N/A";
    //           const missed = recipe.missedIngredients
    //             ? recipe.missedIngredients.map((i) => i.name).join(", ")
    //             : "N/A";

    //           card.innerHTML = `
    //       <img src="${recipe.image}" alt="${recipe.title}" />
    //       <h3>${recipe.title}</h3>
    //       <p><strong class="used">Used Ingredients:</strong> ${used}</p>
    //       <p><strong class="missed">Missing Ingredients:</strong> ${missed}</p>

    //       <div class="btn-group">
    //         <a href="/recipes/${recipe.id}">
    //           <button class="main-btn">View Recipe</button>
    //         </a>
    //         <button class="main-btn save-fav-btn">Save to Favorites</button>
    //       </div>
    //     `;

    //           const saveBtn = card.querySelector(".save-fav-btn");
    //           saveBtn.addEventListener("click", () => {
    //             saveToFavorites(recipe);
    //           });

    //           searchResults.appendChild(card);
    //         });
    //       }

    //       searchResults.style.display = "grid";
    //     } catch (err) {
    //       console.error("Error fetching recipes:", err);
    //       alert("Failed to fetch recipes.");
    //     }
    //   });

    //   function saveToFavorites(recipe) {
    //     let favorites = JSON.parse(localStorage.getItem("favorites")) || [];

    //     // تأكّد إنها مش محفوظة من قبل
    //     if (favorites.some((r) => r.id === recipe.id)) {
    //       alert("This recipe is already in your favorites.");
    //       return;
    //     }

    //     favorites.push(recipe);
    //     localStorage.setItem("favorites", JSON.stringify(favorites));
    //     alert("Recipe saved to favorites!");
    //   }
    </script> -->
    <footer class="site-footer">
      <p>&copy; 2025 Flavor Table. All rights reserved.</p>
      <p>Made with LOVE by <span class="creator-name">Sana'a Tawalbeh</span></p>
    </footer>
  </body>
</html>
